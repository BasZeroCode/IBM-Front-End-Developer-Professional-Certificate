## IBM Cloud Code Engine

ibmcloud ce project current
theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce project current
Getting the current project context...
OK

Name:       Code Engine - sn-labs-muabbasa8  
ID:         f74cead6-9255-4f37-89b1-3b2d262fdadc  
Subdomain:  18dz7epj37wr  
Domain:     us-south.codeengine.appdomain.cloud  
Region:     us-south  

Kubernetes Config:    
Context:               18dz7epj37wr  
Environment Variable:  export KUBECONFIG="/home/theia/.bluemix/plugins/code-engine/Code Engine - sn-labs-muabbasa8-f74cead6-9255-4f37-89b1-3b2d262fdadc.yaml"  
theia@theiadocker-muabbasa8:/home/project$ ibmcloud code-engine application list
Listing all applications...
OK

Name  Status  URL  Latest  Age  Conditions  Reason  
theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce app list
Listing all applications...
OK

Name  Status  URL  Latest  Age  Conditions  Reason  
theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce app create --name helloworld --image docker.io/ibmcom/helloworld
Creating application 'helloworld'...
The Route is still working to reflect the latest desired specification.
Configuration 'helloworld' is waiting for a Revision to become ready.
Ingress has not yet been reconciled.
Waiting for load balancer to be ready.
Run 'ibmcloud ce application get -n helloworld' to check the application status.
OK

https://helloworld.18dz7epj37wr.us-south.codeengine.appdomain.cloud
theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce app get --name helloworld
For troubleshooting information visit: https://cloud.ibm.com/docs/codeengine?topic=codeengine-troubleshoot-apps.
Run 'ibmcloud ce application events -n helloworld' to get the system events of the application instances.
Run 'ibmcloud ce application logs -f -n helloworld' to follow the logs of the application instances.
OK

Name:               helloworld  
ID:                 6fe4cf5d-da8a-454e-94af-62d052085da9  
Project Name:       Code Engine - sn-labs-muabbasa8  
Project ID:         f74cead6-9255-4f37-89b1-3b2d262fdadc  
Age:                61s  
Created:            2023-10-11T04:11:12-04:00  
URL:                https://helloworld.18dz7epj37wr.us-south.codeengine.appdomain.cloud  
Cluster Local URL:  http://helloworld.18dz7epj37wr.svc.cluster.local  
Console URL:        https://cloud.ibm.com/codeengine/project/us-south/f74cead6-9255-4f37-89b1-3b2d262fdadc/application/helloworld/configuration  
Status Summary:     Application deployed successfully  

Environment Variables:    
  Type     Name          Value  
  Literal  CE_APP        helloworld  
  Literal  CE_DOMAIN     us-south.codeengine.appdomain.cloud  
  Literal  CE_SUBDOMAIN  18dz7epj37wr  
Image:                  docker.io/ibmcom/helloworld  
Resource Allocation:      
  CPU:                1  
  Ephemeral Storage:  400M  
  Memory:             4G  

Revisions:     
  helloworld-00001:    
    Age:                61s  
    Latest:             true  
    Traffic:            100%  
    Image:              docker.io/ibmcom/helloworld (pinned to 250026)  
    Running Instances:  1  

Runtime:       
  Concurrency:    100  
  Maximum Scale:  10  
  Minimum Scale:  0  
  Timeout:        300  

Conditions:    
  Type                 OK    Age  Reason  
  ConfigurationsReady  true  43s    
  Ready                true  30s    
  RoutesReady          true  30s    


Hello World from:
. ___  __  ____  ____
./ __)/  \(    \(  __)
( (__(  O )) D ( ) _)
.\___)\__/(____/(____)
.____  __ _   ___  __  __ _  ____
(  __)(  ( \ / __)(  )(  ( \(  __)
.) _) /    /( (_ \ )( /    / ) _)
(____)\_)__) \___/(__)\_)__)(____)

Some Env Vars:
--------------
CE_APP=helloworld
CE_DOMAIN=us-south.codeengine.appdomain.cloud
CE_SUBDOMAIN=18dz7epj37wr
HOME=/root
HOSTNAME=helloworld-00001-deployment-77945d9b7f-wnhnr
K_REVISION=helloworld-00001
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PORT=8080
PWD=/
SHLVL=1
z=Set env var 'SHOW' to see all variables

Events:        
  Type    Reason   Age  Source              Messages  
  Normal  Created  62s  service-controller  Created Configuration "helloworld"  
  Normal  Created  62s  service-controller  Created Route "helloworld"  

Instances:     
  Name                                          Revision          Running  Status   Restarts  Age  
  helloworld-00001-deployment-77945d9b7f-xldgr  helloworld-00001  3/3      Running  0         61s  


## Deploying the first application

ibmcloud ce app list
Listing all applications...
OK

Name        Status  URL                                                                  Latest            Age    Conditions  Reason  
helloworld  Ready   https://helloworld.18dz7epj37wr.us-south.codeengine.appdomain.cloud  helloworld-00001  6m18s  3 OK / 3      

theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce application create --name myapp --build-source https://github.com/BasZeroCode/ynxgb-ci_cd_example --build-context-dir sample --image us.icr.io/${SN_ICR_NAMESPACE}/myapp --registry-secret icr-secret
Creating application 'myapp'...
Submitting build run 'myapp-run-231011-041936686'...
Creating image 'us.icr.io/sn-labs-muabbasa8/myapp:231011-0819-vw11l'...
Waiting for build run to complete...
Build run status: 'Running'
Build run completed successfully.
Run 'ibmcloud ce buildrun get -n myapp-run-231011-041936686' to check the build run status.
Waiting for application 'myapp' to become ready.
Configuration 'myapp' is waiting for a Revision to become ready.
Ingress has not yet been reconciled.
Waiting for load balancer to be ready.
Run 'ibmcloud ce application get -n myapp' to check the application status.
OK                                                

https://myapp.18dz7epj37wr.us-south.codeengine.appdomain.cloud
theia@theiadocker-muabbasa8:/home/project$ ibmcloud ce app get --name myapp
For troubleshooting information visit: https://cloud.ibm.com/docs/codeengine?topic=codeengine-troubleshoot-apps.
Run 'ibmcloud ce application events -n myapp' to get the system events of the application instances.
Run 'ibmcloud ce application logs -f -n myapp' to follow the logs of the application instances.
OK

Name:               myapp  
ID:                 dd45e51d-2e8d-4e7b-aac6-a299a05394ab  
Project Name:       Code Engine - sn-labs-muabbasa8  
Project ID:         f74cead6-9255-4f37-89b1-3b2d262fdadc  
Age:                87s  
Created:            2023-10-11T04:19:39-04:00  
URL:                https://myapp.18dz7epj37wr.us-south.codeengine.appdomain.cloud  
Cluster Local URL:  http://myapp.18dz7epj37wr.svc.cluster.local  
Console URL:        https://cloud.ibm.com/codeengine/project/us-south/f74cead6-9255-4f37-89b1-3b2d262fdadc/application/myapp/configuration  
Status Summary:     Application deployed successfully  

Environment Variables:    
  Type     Name          Value  
  Literal  CE_APP        myapp  
  Literal  CE_DOMAIN     us-south.codeengine.appdomain.cloud  
  Literal  CE_SUBDOMAIN  18dz7epj37wr  
Image:                  us.icr.io/sn-labs-muabbasa8/myapp:231011-0819-vw11l  
Resource Allocation:      
  CPU:                1  
  Ephemeral Storage:  400M  
  Memory:             4G  
Registry Secrets:         
  icr-secret  

Revisions:            
  myapp-00001:    
    Age:                87s  
    Latest:             true  
    Traffic:            100%  
    Image:              us.icr.io/sn-labs-muabbasa8/myapp:231011-0819-vw11l (pinned to abcdc0)  
    Running Instances:  1  

Runtime:              
  Concurrency:    100  
  Maximum Scale:  10  
  Minimum Scale:  0  
  Timeout:        300  

Build Information:    
  Build Run Name:     myapp-run-231011-041936686  
  Build Type:         git  
  Build Strategy:     dockerfile-medium  
  Timeout:            600  
  Source:             https://github.com/BasZeroCode/ynxgb-ci_cd_example  
  Context Directory:  sample  
  Dockerfile:         Dockerfile  
                      
  Build Run Summary:  Succeeded  
  Build Run Status:   Succeeded  
  Build Run Reason:   All Steps have completed executing  
  Run 'ibmcloud ce buildrun get -n myapp-run-231011-041936686' for details.  

Conditions:           
  Type                 OK    Age  Reason  
  ConfigurationsReady  true  51s    
  Ready                true  37s    
  RoutesReady          true  37s    

Events:               
  Type    Reason   Age  Source              Messages  
  Normal  Created  88s  service-controller  Created Configuration "myapp"  
  Normal  Created  88s  service-controller  Created Route "myapp"  

Instances:            
  Name                                     Revision     Running  Status   Restarts  Age  
  myapp-00001-deployment-7cd5c88cdd-lmfxt  myapp-00001  3/3      Running  0         69s  
theia@theiadocker-muabbasa8:/home/project$ 
